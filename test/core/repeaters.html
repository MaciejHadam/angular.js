<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <script src="../../src/Angular.js"></script>
  <script src="../../src/apis.js"></script>
  <script src="../../src/ng/rootScope.js"></script>
  <script src="../../src/ng/exceptionHandler.js"></script>
  <script src="../../src/ng/window.js"></script>
  <script src="../../src/ng/log.js"></script>
  <script src="../../src/ng/parse.js"></script>
  <script src="../../src/loader.js"></script>
  <script src="../../src/auto/injector.js"></script>
  <script src="../../src/ngExp/dte-bootstrap.js"></script>
  <script src="../../src/ngExp/dte.js"></script>
  <script src="../../src/ngExp/template.js"></script>
  <script src="../../src/ngExp/block.js"></script>
  <script src="../../src/ngExp/Anchor.js"></script>
  <script src="../../src/ngExp/compiler.js"></script>
  <script src="../../src/ngExp/directives.js"></script>
  <script>
    function Filter($on_keyup, $prop_value) {
      var filter = this;

      this.attach = function(scope) {
        $on_keyup(function() {
          scope.$apply(function() {
            scope.predicate = $prop_value();
            filter.compute(scope);
          });
        });

        scope.sort = function(prop) {
          scope.sortProp = prop;
          filter.compute(scope);
        }
      };

      this.compute = function(scope) {
        var predicate = scope.predicate || '',
            prop = scope.sortProp || 'date';

        scope.visibleVersions = scope.versions.filter(function(version) {
          return version.version.indexOf(predicate) != -1 ||
              version.name.indexOf(predicate) != -1 ||
              version.date.indexOf(predicate) != -1;
        }).sort(function(a, b) {
          return a[prop] == b[prop]
              ? 0
              : (a[prop] > b[prop] ? 1 : -1);
        });
      };
    };

    function procesServerPrerender($template, $rootScope) {
      var trTemplate = $template('.row', [
        ['.',        ['[fadeOut]', null], ['[fadeIn]', null]],
        ['.date',    ['[bind]', 'version.date']],
        ['.version', ['[bind]', 'version.version']],
        ['.name',    ['[bind]', 'version.name']]
      ]);
      var masterTemplate = $template('.', [
        ['.repeatAnchor', ['[repeat]', 'version in visibleVersions', trTemplate]],
        ['.filter',    [Filter, null]],
        ['.dateTH',    ['[click]', 'sort("date")']],
        ['.versionTH', ['[click]', 'sort("version")']],
        ['.nameTH',    ['[click]', 'sort("name")']]
      ]);

      var masterBlock = masterTemplate('.', [
        [ trTemplate, 39 ]
      ]);


      $rootScope.versions = [
        { version: '1.0.0',     name: 'temporal-domination',      date: '2012-06-13' },
        { version: '1.0.0rc12', name: 'regression-extermination', date: '2012-06-12' },
        { version: '1.0.0rc11', name: 'promise-resolution',       date: '2012-06-10' },
        { version: '1.0.0rc10', name: 'tesseract-giftwrapping',   date: '2012-05-23' },
        { version: '1.0.0rc9',  name: 'eggplant-teleportation',   date: '2012-05-14' },
        { version: '1.0.0rc8',  name: 'blooming-touch',           date: '2012-05-06' },
        { version: '1.0.0rc7',  name: 'rc-generation',            date: '2012-04-30' },
        { version: 'v1.0.0rc6', name: 'runny-nose',               date: '2012-04-20' },
        { version: '1.0.0rc5',  name: 'reality-distortion',       date: '2012-04-12' },
        { version: '1.0.0rc4',  name: 'insomnia-induction',       date: '2012-04-05' },
        { version: '1.0.0rc3',  name: 'barefoot-telepathy',       date: '2012-03-29' },
        { version: '1.0.0rc2',  name: 'silence-absorption',       date: '2012-03-20' },
        { version: '1.0.0rc1',  name: 'moiré-vision',             date: '2012-03-13' },
        { version: '0.10.6',    name: 'bubblewrap-cape',          date: '2012-01-17' },
        { version: '0.10.5',    name: 'steel-fist',               date: '2011-11-08' },
        { version: '0.10.4',    name: 'human-torch',              date: '2011-10-22' },
        { version: '0.10.3',    name: 'shattering-heartbeat',     date: '2011-10-13' },
        { version: '0.10.2',    name: 'sneaky-seagull',           date: '2011-10-08' },
        { version: '0.10.1',    name: 'inexorable-juggernaut',    date: '2011-09-09' },
        { version: '0.10.0',    name: 'chicken-hands',            date: '2011-09-02' },
        { version: '0.9.19',    name: 'canine-psychokinesis',     date: '2011-08-20' },
        { version: '0.9.18',    name: 'jiggling-armfat',          date: '2011-07-29' },
        { version: '0.9.17',    name: 'vegetable-reanimation',    date: '2011-06-30' },
        { version: '0.9.16',    name: 'weather-control',          date: '2011-06-07' },
        { version: '0.9.15',    name: 'lethal-stutter',           date: '2011-04-11' },
        { version: '0.9.14',    name: 'key-maker',                date: '2011-04-01' },
        { version: '0.9.13',    name: 'curdling-stare',           date: '2011-03-13' },
        { version: '0.9.12',    name: 'thought-implanter',        date: '2011-03-03' },
        { version: '0.9.11',    name: 'snow-maker ',              date: '2011-02-08' },
        { version: '0.9.10',    name: 'flea-whisperer ',          date: '2011-01-26' },
        { version: '0.9.9',     name: 'time-shift',               date: '2011-01-13' },
        { version: '0.9.8',     name: 'astral-projection',        date: '2010-12-23' },
        { version: '0.9.7',     name: 'sonic-scream',             date: '2010-12-10' },
        { version: '0.9.6',     name: 'night-vision',             date: '2010-12-06' },
        { version: '0.9.5',     name: 'turkey-blast',             date: '2010-11-25' },
        { version: '0.9.4',     name: 'total-recall',             date: '2010-11-18' },
        { version: '0.9.3',     name: 'cold-resistance',          date: '2010-11-10' },
        { version: '0.9.2',     name: 'faunal-mimicry',           date: '2010-11-03' },
        { version: '0.9.1',     name: 'repulsion-field',          date: '2010-10-26' },
        { version: '0.9.0',     name: 'dragon-breath',            date: '2010-10-20' }
      ];

      $rootScope.visibleVersions = [].concat($rootScope.versions);

      masterBlock.attach($rootScope);
      $rootScope.$apply();
    }

    angular.module('hello', ['ng2', 'ng2.directives']).run(procesServerPrerender);
  </script>
  <style>
    td, th {
      padding: 0 .5em;
    }


    tr {
      -webkit-transition-property: -webkit-transform, opacity, line-height, all;
      -webkit-transition-duration: .3s, .3s, .2s, .3s;
      -webkit-transition-delay: 0s, 0s, .2s, 0s;
      -webkit-transition-timing-function: ease;
      line-height: 1.2em;
      opacity: 1;
    }

    tr.fadeout {
      line-height: 0;
      -webkit-transform: translate(100%);
      opacity: 0;
    }

    tr.reverse {
      -webkit-transition-delay: .2s, .2s, 0s, 0s;
    }

  </style>
</head>
<body class="root">
  <h1>Repeater</h1>
  <input class="filter">
  <table>
    <tbody><tr class="repeatAnchor">
      <th class="dateTH">Date</th>
      <th class="versionTH">Version</th>
      <th class="nameTH">Code name</th>
    </tr><tr class="row">
      <td class="date">2012-06-13</td>
      <td class="version">1.0.0</td>
      <td class="name">temporal-domination</td>
    </tr><tr>
      <td class="date">2012-06-12</td>
      <td class="version">1.0.0rc12</td>
      <td class="name">regression-extermination</td>
    </tr><tr>
      <td class="date">2012-06-10</td>
      <td class="version">1.0.0rc11</td>
      <td class="name">promise-resolution</td>
    </tr><tr>
      <td class="date">2012-05-23</td>
      <td class="version">1.0.0rc10</td>
      <td class="name">tesseract-giftwrapping</td>
    </tr><tr>
      <td class="date">2012-05-14</td>
      <td class="version">1.0.0rc9</td>
      <td class="name">eggplant-teleportation</td>
    </tr><tr>
      <td class="date">2012-05-06</td>
      <td class="version">1.0.0rc8</td>
      <td class="name">blooming-touch</td>
    </tr><tr>
      <td class="date">2012-04-30</td>
      <td class="version">1.0.0rc7</td>
      <td class="name">rc-generation</td>
    </tr><tr>
      <td class="date">2012-04-20</td>
      <td class="version">v1.0.0rc6</td>
      <td class="name">runny-nose</td>
    </tr><tr>
      <td class="date">2012-04-12</td>
      <td class="version">1.0.0rc5</td>
      <td class="name">reality-distortion</td>
    </tr><tr>
      <td class="date">2012-04-05</td>
      <td class="version">1.0.0rc4</td>
      <td class="name">insomnia-induction</td>
    </tr><tr>
      <td class="date">2012-03-29</td>
      <td class="version">1.0.0rc3</td>
      <td class="name">barefoot-telepathy</td>
    </tr><tr>
      <td class="date">2012-03-20</td>
      <td class="version">1.0.0rc2</td>
      <td class="name">silence-absorption</td>
    </tr><tr>
      <td class="date">2012-03-13</td>
      <td class="version">1.0.0rc1</td>
      <td class="name">moiré-vision</td>
    </tr><tr>
      <td class="date">2012-01-17</td>
      <td class="version">0.10.6</td>
      <td class="name">bubblewrap-cape</td>
    </tr><tr>
      <td class="date">2011-11-08</td>
      <td class="version">0.10.5</td>
      <td class="name">steel-fist</td>
    </tr><tr>
      <td class="date">2011-10-22</td>
      <td class="version">0.10.4</td>
      <td class="name">human-torch</td>
    </tr><tr>
      <td class="date">2011-10-13</td>
      <td class="version">0.10.3</td>
      <td class="name">shattering-heartbeat</td>
    </tr><tr>
      <td class="date">2011-10-08</td>
      <td class="version">0.10.2</td>
      <td class="name">sneaky-seagull</td>
    </tr><tr>
      <td class="date">2011-09-09</td>
      <td class="version">0.10.1</td>
      <td class="name">inexorable-juggernaut</td>
    </tr><tr>
      <td class="date">2011-09-02</td>
      <td class="version">0.10.0</td>
      <td class="name">chicken-hands</td>
    </tr><tr>
      <td class="date">2011-08-20</td>
      <td class="version">0.9.19</td>
      <td class="name">canine-psychokinesis</td>
    </tr><tr>
      <td class="date">2011-07-29</td>
      <td class="version">0.9.18</td>
      <td class="name">jiggling-armfat</td>
    </tr><tr>
      <td class="date">2011-06-30</td>
      <td class="version">0.9.17</td>
      <td class="name">vegetable-reanimation</td>
    </tr><tr>
      <td class="date">2011-06-07</td>
      <td class="version">0.9.16</td>
      <td class="name">weather-control</td>
    </tr><tr>
      <td class="date">2011-04-11</td>
      <td class="version">0.9.15</td>
      <td class="name">lethal-stutter</td>
    </tr><tr>
      <td class="date">2011-04-01</td>
      <td class="version">0.9.14</td>
      <td class="name">key-maker</td>
    </tr><tr>
      <td class="date">2011-03-13</td>
      <td class="version">0.9.13</td>
      <td class="name">curdling-stare</td>
    </tr><tr>
      <td class="date">2011-03-03</td>
      <td class="version">0.9.12</td>
      <td class="name">thought-implanter</td>
    </tr><tr>
      <td class="date">2011-02-08</td>
      <td class="version">0.9.11</td>
      <td class="name">snow-maker </td>
    </tr><tr>
      <td class="date">2011-01-26</td>
      <td class="version">0.9.10</td>
      <td class="name">flea-whisperer </td>
    </tr><tr>
      <td class="date">2011-01-13</td>
      <td class="version">0.9.9</td>
      <td class="name">time-shift</td>
    </tr><tr>
      <td class="date">2010-12-23</td>
      <td class="version">0.9.8</td>
      <td class="name">astral-projection</td>
    </tr><tr>
      <td class="date">2010-12-10</td>
      <td class="version">0.9.7</td>
      <td class="name">sonic-scream</td>
    </tr><tr>
      <td class="date">2010-12-06</td>
      <td class="version">0.9.6</td>
      <td class="name">night-vision</td>
    </tr><tr>
      <td class="date">2010-11-25</td>
      <td class="version">0.9.5</td>
      <td class="name">turkey-blast</td>
    </tr><tr>
      <td class="date">2010-11-18</td>
      <td class="version">0.9.4</td>
      <td class="name">total-recall</td>
    </tr><tr>
      <td class="date">2010-11-10</td>
      <td class="version">0.9.3</td>
      <td class="name">cold-resistance</td>
    </tr><tr>
      <td class="date">2010-11-03</td>
      <td class="version">0.9.2</td>
      <td class="name">faunal-mimicry</td>
    </tr><tr>
      <td class="date">2010-10-26</td>
      <td class="version">0.9.1</td>
      <td class="name">repulsion-field</td>
    </tr><tr>
      <td class="date">2010-10-20</td>
      <td class="version">0.9.0</td>
      <td class="name">dragon-breath</td>
    </tr>
  </table>
</body>
<script>
  publishExternalAPI();
  angular.injector(['hello']);
</script>
</html>
