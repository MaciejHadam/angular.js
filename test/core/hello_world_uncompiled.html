<html>
<head>
  <script>var CLOSURE_BASE_PATH = '../../';</script>
  <script src="../../lib/closure-compiler/base.js"></script>
  <script>
    goog.require('angular.module');
    goog.require('angular.injector');
    goog.require('angular.core.directives');
    goog.require('angular.core.$rootScope');
    goog.require('angular.core.$compile');
  </script>

  <script>
    var helloModule = angular.module('hello', ['core']);

    helloModule.value('alert', function(msg) {
      window.alert(msg);
    });

    helloModule.controller('MyCtrl', function($scope, alert) {
      $scope.name = 'XXX';
      $scope.show = alert;
    });
  </script>
</head>
<body>
  <div controller="MyCtrl">
    Hello <span bind="name"></span>!
    <a href click="show(name)">alert it</a>
  </div>

  <script>
    // manual bootstrap
    var bootstrap = function(rootElement, modules) {
      var injector = angular.injector(modules);

      injector.invoke(function($rootScope, $compile) {
        var template = $compile([rootElement]);
        var block = template([rootElement]);

        block.attach($rootScope);
        $rootScope.$apply();
      });
    };

    bootstrap(document.body, ['hello']);
  </script>
</body>
</html>
